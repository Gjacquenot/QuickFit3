<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <title>Data Table Online-Help: Function Fit Analysis</title>
  </head>
  <body>
    $$qf_commondoc_header.start$$  $$qf_commondoc_header.end$$ 
    <h2>Starting this tool</h2>
    <p>Add a <a href="plots.html">plot</a> with the X- and Y-data, that you want to fit and specify the errors on the Y-data, if you want to use them to weight the least-squares fit. The you have to use the button <img src="./pic/plots_pic039.png"> in the advanced plot properties to display the fit dialog:
<center><a name="fit_pic000"><img src="./pic/fit_pic000.png" border="1">
</center>
</p>


<h2>Performing a Fit</h2>
<p>
The plot on the left displays the data, the errors and the current fit. Below the main plot, the residuals are shown. At the top of the window, you can specify the fit algorithm and the fit model that shoulld be used. On the rhs, a table shows the fit parameters, the erros and their ranges. There you can also fix certain fit parameters.    
</p>
<p>
    Below the plot, you can change the plot options and change the range of data, used for the fit (excluded data points are shown as a red range in the graph!).
</p>
<p>
The button <b>Guess parameters</b> uses a feature, that is implemented in some fit models (it is activated only, if the feature is supported), which estimates inital values for the fit parameters, based on the given dataset.
</p>
<p>
The button <b>Fit</b>   performs the actual fit. Below that button, you can choose whether the fit should be <b>weighted</b> and whether <b>bootstrapping</b> should be used for the error estimates. You can also choose to <b>fit log(Y)</b>, which can improve the fit results, if the y-values span several orders of magnitude. 
$$startbox_info$$
These settings influence the fit algorithm. By default (non-weighted, non-log(Y), no bootstrapping) it finds the set of fit parameters $$math:\vec{p}$$, which minimizes the sum of squared errors:
$$bmath:\chi^2(\vec{p})=\sum_i\left(y_i-f(x_i, \vec{p})\right)^2$$
If weighting is used, weighting factors (or data errors) arre added to the &chi;<sup>2</sup>-function:
$$bmath:\chi^2(\vec{p})=\sum_i\left(\frac{y_i-f(x_i, \vec{p})}{\sigma_i}\right)^2$$
In some cases, the y-data spans several orders of magnitude. Then the residuals may also differ by several orders of magnitude. Therefore it may be easier to fit the model function to the logarithmized y-data, i.e. xhanging the &chi;<sup>2</sup>-function to:
$$bmath:\chi^2(\vec{p})=\sum_i\left(\frac{\log(y_i)-\log(f(x_i, \vec{p}))}{\log(\sigma_i)}\right)^2$$
This requires of course, that all data is positive and also the fit function $$math:f(x,\vec{p})$$ always returns a positive value.<br><br>
The source of weighting can also be chosen:
<ul>
    <li><b>1/(weights column from data)^2:</b> Here the weights $(\sigma_i)$ are taken from a user-selected column of data.</li>
    <li><b>statistical: (Y_i-M(X_i))/|Y_i|:</b> Here the weights $(\sigma_i)$ are taken from the y-data column as $(\sigma_i=\sqrt{\left|y_i\right|})$, so smaller values have higher weights, than larger values.</li>
    <li><b>variance: (Y_i-M(X_i))/|Y_i|^2:</b> Here the weights $(\sigma_i)$ are taken from the y-data column as $(\sigma_i=\left|y_i\right|)$, so smaller values have higher weights, than larger values.</li>
</ul>
<br><br>
Finally you can use bootstrapping for the error estimates. Then the fit is repeated several times for changing subsets (randomly sampled) of the input data vector. Finally the standard deviation of the fit results for each parameter is returned as parameter error. If bootstrapping is activated, you can also choose how many repeats are used. For each repeat, only the given fraction of the data is used and the ideal fit parameters are distored by a given percentage before the fit.
$$endbox$$
</p>
<p>
When you are satisfied with the fit results, you can click on <b>Accept Fit</b>, which will add the fit as a graph to the current plot. The fit results can either be stored as parameters in the plot, or as a column in the table. 
</p>




  </body>
</html>
