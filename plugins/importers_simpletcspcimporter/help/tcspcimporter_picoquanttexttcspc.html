<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Importer Plugin for "Text TCSPC file [PicoQuant Format]" files</title>
	</head>
	<body>
		$$qf_commondoc_header.start$$ $$qf_commondoc_header.end$$ 
		
		$$warning:since this importer has to parse text files, it is <b>VERY SLOW</b>!!!$$
		
		<h2>Plugin Decsription</h2>
		<p>This plugins imports photons from simple TCSPC files, stored as text-files. It supports the text-files generated by the DEMO-programs of the company PicoQuant:
		<ol>
		  <li><b>File Header:</b> The file header may contain name-value pairs for properties. The name has to be separated from the property by <tt>=</tt>, <tt>:</tt>, or several whitespaces (at least 2). Some of the names have special meaning and have to be present in the file:<ul>
			  <li><tt>no of channels</tt> gives the number of microtime channels (if not supplied,m 65535 is assumed).</li>
			  <li><tt>resolution</tt> gives the microtime-channelwidth in nanoseconds</li>
			  <li><tt>routing channels</tt> is the number of input channels (e.g. on the router, if one is used)</li>
			  <li><tt>acquisitiontime</tt> duration of the acquisition in milliseconds</li>
		  </ul></li>
		  <li><b>Data Header:</b> Is a line directly before the data segment, which specifies the order of data. The importer will try to parse this From this header, also the time-unit of the column time or truetime is determined (given e.g. as <tt>truetime/ns</tt>)</li>
		  <li><b>Data:</b> data as numbers, separated by whitespace and in the order specified in 2. This part of the reader ignores the appearance of <tt>CHN</tt> in a line and removes lines with indicators <tt>MAR</tt> and <tt>OFL</tt>. $$note:Therefore urrently markers are not supported!!!$$</li>
		</ol>
		</p>
		
		<h2>Example Data</h2>
		<h3>From PTU-file</h3>
		<p><blockquote><pre>
Tag Version: 00.0.1 

File_GUID                               {B73BFEFA-7C54-430F-A6D2-7F4D8EEF6D0F}
File_CreatingTime                       Thu Dec 06 17:32:51 2012

Measurement_SubMode                     0
File_Comment                            60x UPLSAPO 60x NA1.2, DM405/488/559/635, Exci. 488+559, 20MHz, Pinhole: 120Âµm, Filter: ch2 520/35, Ch1: 620/60 570LP Dichroic
Fast_Load_End                           <empty Tag>
CreatorSW_Name                          SymPhoTime 64
CreatorSW_Version                       1.0
CreatorSW_SVNBuild                      2339
CreatorSW_Modules                       0
ImgHdr_Dimensions                       1
ImgHdr_Ident                            3
Measurement_Mode                        3
HW_Type                                 PicoHarp
HW_SerialNo                             1004851
HW_Version                              2.0
HW_ExternalRefClock                     False
HW_Modules                              1
HWModule_TypeCode(0)                    1000
HWModule_VersCode(0)                    536870912
HW_Markers                              4
HWMarkers_Enabled(0)                    True
HWMarkers_RisingEdge(0)                 False
HWMarkers_Enabled(1)                    True
HWMarkers_RisingEdge(1)                 False
HWMarkers_Enabled(2)                    True
HWMarkers_RisingEdge(2)                 False
HWMarkers_Enabled(3)                    True
HWMarkers_RisingEdge(3)                 False
HW_BaseResolution                       4.000000E-012
MeasDesc_BinningFactor                  4
MeasDesc_Resolution                     1.600000E-011
HWSync_CFDLevel                         150
HWSync_CFDZeroCross                     10
HWSync_Offset                           0
HWSync_Divider                          8
HW_InpChannels                          2
HWInpChan_CFDLevel(0)                   400
HWInpChan_CFDZeroCross(0)               10
HWInpChan_Offset(0)                     0
HWInpChan_Enabled(0)                    True
HWInpChan_ModuleIdx(0)                  1
HWRouter_ModelCode                      3
HWRouter_Version                        1.0
HWRouter_Channels                       4
HWRouter_Enabled                        True
HWRouterChan_InputType(0)               0
HWRouterChan_InputLevel(0)              1500
HWRouterChan_RisingEdge(0)              True
HWRouterChan_CFDPresent(0)              False
HWRouterChan_InputType(1)               0
HWRouterChan_InputLevel(1)              1500
HWRouterChan_RisingEdge(1)              True
HWRouterChan_CFDPresent(1)              False
HWRouterChan_InputType(2)               0
HWRouterChan_InputLevel(2)              1500
HWRouterChan_RisingEdge(2)              True
HWRouterChan_CFDPresent(2)              False
HWRouterChan_InputType(3)               0
HWRouterChan_InputLevel(3)              1500
HWRouterChan_RisingEdge(3)              True
HWRouterChan_CFDPresent(3)              False
TTResult_SyncRate                       19999440
TTResult_InputRate(0)                   123810
MeasDesc_GlobalResolution               5.000140E-008
TTResult_NumberOfRecords                25551012
MeasDesc_AcquisitionTime                2.000000E+005
TTResultFormat_TTTRRecType              66307
TTResultFormat_BitsPerRecord            32
Header_End                              <empty Tag>
-----------------------
PicoHarp T3 data

record# chan   nsync truetime/ns dtime
0 CHN 1 1077    53852       2521
1 CHN 2 1725    86252        761
2 CHN 1 1822    91103        174
3 CHN 2 2151   107553        184
4 CHN 1 2217   110853       2000
5 CHN 2 2275   113753        209
6 CHN 2 2293   114653        695
7 CHN 2 2386   119303        363
8 CHN 2 2579   128954        523
9 CHN 2 2592   129604        154
10 CHN 2 2668   133404        253
 ...
 ...
 ...
485 CHN 2 81346  4067414        180
486 CHN 2 81378  4069014        221
487 MAR  1 81587
488 CHN 1 81614  4080814       1911
489 CHN 2 81633  4081764        231
 ...
 ...
 ...
1306 CHN 1 196483  9824425       2647
1307 CHN 1 196535  9827025       1842
1308 OFL *  1
		</pre></blockquote>
		</p>
		<h3>From PT3-file</h3>
		<p><blockquote><pre>
Ident            : PicoHarp 300
Format Version   : 2.0
Creator Name     : SymPhoTime
Creator Version  : 5.2.4.0
Time of Creation : 24.07.13 13:20:31
File Comment     : Created on 24.07.2013 13:20:31
No of Curves     : 0
Bits per Record  : 32
RoutingChannels  : 4
No of Boards     : 1
Active Curve     : 0
Measurement Mode : 3
Sub-Mode         : 0
Range No         : 0
Offset           : 0
AcquisitionTime  : 30000
Stop at          : 0
Stop on Ovfl.    : 0
Restart          : 0
DispLinLog       : 1
DispTimeAxisFrom : 0
DispTimeAxisTo   : 16
DispCountAxisFrom: 1
DispCountAxisTo  : 65535
---------------------
 HardwareIdent   : PicoHarp 300
 HardwareVersion : 2.0
 HardwareSerial  : 1006424
 SyncDivider     : 8
 CFDZeroCross0   : 10
 CFDLevel0       : 50
 CFDZeroCross1   : 10
 CFDLevel1       : 50
 Resolution/ns   : 0.004000
---------------------
ExtDevices      : 0
CntRate0        : 80048577
CntRate1        : 1112323
StopAfter       : 2532
StopReason      : 3
Records         : 1550793
ImgHdrSize      : 0

record# chan   nsync dtime truesync truetime/ns 
      0 1        352  959      352     4401.166
      1 1        503 1101      503     6288.088
      2 1        528  667      528     6598.663
      3 1        546  819      546     6824.134
      4 2        701  730      701     8760.103
      5 2        713  885      713     8910.632
      6 1        722 1016      722     9023.587
      7 2        756  653      756     9446.877
      8 2        767  512      767     9583.730
      9 2        900 2220      900    11252.053
     10 1        956 1507      956    11948.776
   ...
   3503 2      65500 1204   262108  3274366.583
   3504 1      65529  864   262137  3274727.503
 OFL
  ...
1550792 1      35119  662 112298287 1402876745.854
		</pre></blockquote>
		</p>
		
		<h3>From T3R-file</h3>
		<p><blockquote><pre>
Identifier       : TimeHarp 200
Software Version : 5.0
Hardware Version : 2.4
Time of Creation : 05/08/13 14:25:23
File Comment     : Untitled
No of Channels   : 4096
No of Curves     : 0
Bits per Channel : 32
Routing Channels : 4
No of Boards     : 1
Active Curve     : 0
Measurement Mode : 2
Measurem.SubMode : 0
Range No         : 2
Offset           : 0
AcquisitionTime  : 1140000
Stop at          : 65535
Stop on Ovfl.    : 0
Restart          : 0
DispLinLog       : 0
DispTimeAxisFrom : 500
DispTimeAxisTo   : 700
DispCountAxisFrom: 1
DispCountAxisTo  : 30
Board serial     : 60
CFDZeroCross     : 20
CFDDiscriminMin  : 60
SYNCLevel        : -76
Curve Offset     : 0
Resolution       : 0.154727
Glob Clock       : 100
Sync Rate        : 10000384
Average CFD Rate : 1578
Stop After       : 1140000
Stop Reason      : 0
No of Records    : 1921810
Special Hdr Size : 0

      #   timetag    time/s   channel  route

      0    28931    0.0028931    659    0
      1    47758    0.0047758    642    0
      2    56538    0.0056538    357    0
      3    58776    0.0058776    621    0
      4    42053    0.0107589    631    1
      5    54077    0.0119613    568    0
      6     5421    0.0136493    370    1
      7    19568    0.0150640    372    1
      8    20427    0.0151499    684    1
      9    20601    0.0151673    281    0
     10    33176    0.0164248    722    1
	 ......
		</pre></blockquote>
		</p>
	</body>
</html>
